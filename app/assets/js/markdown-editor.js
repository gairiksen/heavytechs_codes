(self.webpackChunkmarketplace_template_poc=self.webpackChunkmarketplace_template_poc||[]).push([[18],{9966:function(U,m,d){"use strict";d.r(m);var h=d(7466),y=d.n(h),_=d(4396),f=(t,o,e)=>new Promise((a,c)=>{var r=n=>{try{l(e.next(n))}catch(i){c(i)}},u=n=>{try{l(e.throw(n))}catch(i){c(i)}},l=n=>n.done?a(n.value):Promise.resolve(n.value).then(r,u);l((e=e.apply(t,o)).next())});const s=document.querySelector('[data-s3-photo="form"]'),v=t=>{const o=s.dataset.s3UppyObjectUuid,e=s.dataset.s3UppyPhotoType;return(0,_.Z)("/api/photos",{body:JSON.stringify({photo:{direct_url:t,photo_type:e,object_uuid:o}})})},E=(t,o)=>{const e=t.indexOf(`<${o}>`),a=t.indexOf(`</${o}>`,e);return e!==-1&&a!==-1?t.slice(e+o.length+2,a):""},p=document.querySelector("[data-markdown-editor]"),O=new(y())({element:p,showIcons:["code","upload-image"],hideIcons:["image","side-by-side","fullscreen","preview"],uploadImage:!0,status:["upload-image","autosave"],imageUploadFunction:function(t,o,e){return f(this,null,function*(){const a=new FormData(s);a.set("file",t,t.name);const c=yield fetch(s.action,{method:s.method,body:a});if(c.ok){const r=yield c.text(),u=E(r,"Location"),n=(yield v(u)).photo.versions.uncropped.replace(/\s/g,"%20");o(n)}else e("Can't upload an image")})}}),P=p.attributes.id.value;document.querySelector(`label[for="${P}"]`).onclick=function(){O.codemirror.focus()}},2562:function(){}}]);
